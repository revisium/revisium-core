# ====================
# Base Configuration
# ====================
sonar.projectKey=revisium_revisium-core
sonar.organization=revisium

# ====================
# Coverage Settings
# ====================
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# ====================
# Standard Exclusions
# ====================
sonar.exclusions=**/__tests__**,**/__mocks__**,**/*.spec.ts,prisma/**/*,src/__generated__/**
sonar.coverage.exclusions=**/*.module.ts,**/__tests__**,**/__mocks__**,**/*.spec.ts,prisma/**/*,src/__generated__/**

# ====================
# Issue Ignore Rules
# ====================
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,tech1,tech2,tech3,tech4,tech5,tech6,fp1,fp2,fp3,fp4

# Standard exclusions for CQRS pattern
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S6564
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.command.ts

sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S6564
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.query.ts

sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S2094
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.command.ts

sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S2094
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.query.ts

# ====================
# Technical Debt Exclusions
# ====================
# TODO: Refactor plugin.list.service.ts to reduce parameters (S107: Too many parameters)
sonar.issue.ignore.multicriteria.tech1.ruleKey=typescript:S107
sonar.issue.ignore.multicriteria.tech1.resourceKey=**src/features/plugin/plugin.list.service.ts

# TODO: Fix architecture violations in GraphQL models (S7197: Architecture constraints)
sonar.issue.ignore.multicriteria.tech2.ruleKey=tsarchitecture:S7197
sonar.issue.ignore.multicriteria.tech2.resourceKey=**src/api/graphql-api/**/*.model.ts

# TODO: Fix architecture violations in schema utils (S7197: Architecture constraints)
sonar.issue.ignore.multicriteria.tech3.ruleKey=tsarchitecture:S7197
sonar.issue.ignore.multicriteria.tech3.resourceKey=**src/features/share/utils/schema*

# TODO: Address SQL injection risk in pg-bus driver (S2077: SQL formatted externally)
sonar.issue.ignore.multicriteria.tech4.ruleKey=typescript:S2077
sonar.issue.ignore.multicriteria.tech4.resourceKey=**src/infrastructure/cache/pg-bus/pg-bus.driver.ts

# TODO: Fix architecture violations in schema lib (S7197: Architecture constraints)
sonar.issue.ignore.multicriteria.tech5.ruleKey=tsarchitecture:S7197
sonar.issue.ignore.multicriteria.tech5.resourceKey=**src/features/share/utils/schema/lib/*

# TODO: Update GitHub Actions workflow (S7631: GitHub Actions issue)
sonar.issue.ignore.multicriteria.tech6.ruleKey=githubactions:S7631
sonar.issue.ignore.multicriteria.tech6.resourceKey=**.github/workflows/deploy.yml

# ====================
# False Positives
# ====================
# FP: docker-compose-test.yml contains test database password (not a secret)
sonar.issue.ignore.multicriteria.fp1.ruleKey=yaml:S2068
sonar.issue.ignore.multicriteria.fp1.resourceKey=docker-compose-test.yml

# FP: package-lock.json contains dependency names with "password" keyword
sonar.issue.ignore.multicriteria.fp2.ruleKey=json:S2068
sonar.issue.ignore.multicriteria.fp2.resourceKey=package-lock.json

# FP: S6698 PostgreSQL password in docker-compose-test.yml is for local testing only
sonar.issue.ignore.multicriteria.fp3.ruleKey=secrets:S6698
sonar.issue.ignore.multicriteria.fp3.resourceKey=docker-compose-test.yml

# FP: .env.test contains test database credentials (not a secret)
sonar.issue.ignore.multicriteria.fp4.ruleKey=secrets:S6698
sonar.issue.ignore.multicriteria.fp4.resourceKey=.env.test

# ====================
# Duplicate Code Exclusions
# ====================
sonar.cpd.exclusions=**src/features/share/utils/schema/model/schema/**/*.store.ts,src/__generated__/**