
/* !!! This is code generated by Prisma. Do not edit directly. !!! */
/* eslint-disable */
// biome-ignore-all lint: generated file
// @ts-nocheck 
import * as $runtime from "@prisma/client/runtime/client"

/**
 * @param fromRevisionId
 * @param toRevisionId
 * @param tableCreatedId (optional, NULL for all tables)
 * @param includeSystem (optional, whether to include system tables, default FALSE)
 */
export const getRowChangesStatsBetweenRevisions = $runtime.makeTypedQueryFactory("\nWITH parent_rows AS (\nSELECT\nr.\"id\",\nr.\"createdId\",\nr.\"hash\",\nr.\"schemaHash\",\nt.\"createdId\" as \"tableCreatedId\"\nFROM \"Row\" r\nINNER JOIN \"_RowToTable\" rt ON r.\"versionId\" = rt.\"A\"\nINNER JOIN \"Table\" t ON t.\"versionId\" = rt.\"B\"\nINNER JOIN \"_RevisionToTable\" revt ON t.\"versionId\" = revt.\"B\"\nWHERE revt.\"A\" = $1\nAND ($3::text IS NULL OR t.\"createdId\" = $3)\nAND ($4::boolean IS TRUE OR t.\"system\" = FALSE)\n),\nchild_rows AS (\nSELECT\nr.\"id\",\nr.\"createdId\",\nr.\"hash\",\nr.\"schemaHash\",\nt.\"createdId\" as \"tableCreatedId\"\nFROM \"Row\" r\nINNER JOIN \"_RowToTable\" rt ON r.\"versionId\" = rt.\"A\"\nINNER JOIN \"Table\" t ON t.\"versionId\" = rt.\"B\"\nINNER JOIN \"_RevisionToTable\" revt ON t.\"versionId\" = revt.\"B\"\nWHERE revt.\"A\" = $2\nAND ($3::text IS NULL OR t.\"createdId\" = $3)\nAND ($4::boolean IS TRUE OR t.\"system\" = FALSE)\n)\nSELECT\nCOUNT(*) AS \"total\",\nCOUNT(*) FILTER (WHERE pr.\"createdId\" IS NULL) AS \"added\",\nCOUNT(*) FILTER (WHERE cr.\"createdId\" IS NULL) AS \"removed\",\nCOUNT(*) FILTER (WHERE pr.\"id\" != cr.\"id\" AND pr.\"createdId\" IS NOT NULL AND cr.\"createdId\" IS NOT NULL) AS \"renamed\",\nCOUNT(*) FILTER (WHERE pr.\"id\" = cr.\"id\" AND cr.\"hash\" != pr.\"hash\") AS \"modified\",\nCOUNT(*) FILTER (WHERE cr.\"schemaHash\" IS NOT NULL AND pr.\"schemaHash\" IS NOT NULL AND cr.\"schemaHash\" != pr.\"schemaHash\") AS \"schemaChanges\",\nCOUNT(*) FILTER (WHERE (cr.\"schemaHash\" IS NULL OR pr.\"schemaHash\" IS NULL OR cr.\"schemaHash\" = pr.\"schemaHash\") AND cr.\"hash\" != pr.\"hash\") AS \"dataChanges\"\nFROM child_rows cr\nFULL OUTER JOIN parent_rows pr USING (\"createdId\")\nWHERE\npr.\"createdId\" IS NULL OR\ncr.\"createdId\" IS NULL OR\npr.\"id\" != cr.\"id\" OR\ncr.\"hash\" != pr.\"hash\"") as (fromRevisionId: string, toRevisionId: string, tableCreatedId: string, includeSystem: boolean) => $runtime.TypedSql<getRowChangesStatsBetweenRevisions.Parameters, getRowChangesStatsBetweenRevisions.Result>

export namespace getRowChangesStatsBetweenRevisions {
  export type Parameters = [fromRevisionId: string, toRevisionId: string, tableCreatedId: string, includeSystem: boolean]
  export type Result = {
    total: bigint | null
    added: bigint | null
    removed: bigint | null
    renamed: bigint | null
    modified: bigint | null
    schemaChanges: bigint | null
    dataChanges: bigint | null
  }
}
