input AddUserToOrganizationInput {
  organizationId: String!
  roleId: UserOrganizationRoles!
  userId: String!
}

input AddUserToProjectInput {
  organizationId: String!
  projectName: String!
  roleId: UserProjectRoles!
  userId: String!
}

type AddedRowChangeModel {
  changeType: ChangeType!
  fieldChanges: [FieldChangeModel!]!
  row: RowChangeRowModel!
  table: RowChangeTableModel!
}

input BooleanFilter {
  equals: Boolean
  not: Boolean
}

type BranchModel {
  createdAt: DateTime!
  draft: RevisionModel!
  head: RevisionModel!
  id: String!
  isRoot: Boolean!
  name: String!
  parent: ParentBranchModel
  project: ProjectModel!
  projectId: String!
  revisions(data: GetBranchRevisionsInput!): RevisionConnection!
  start: RevisionModel!
  touched: Boolean!
}

type BranchModelEdge {
  cursor: String!
  node: BranchModel!
}

type BranchesConnection {
  edges: [BranchModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

enum ChangeType {
  ADDED
  MODIFIED
  REMOVED
  RENAMED
  RENAMED_AND_MODIFIED
}

type ChildBranchModel {
  branch: BranchModel!
  revision: RevisionModel!
}

type ConfigurationModel {
  availableEmailSignUp: Boolean!
  github: GithubOauth!
  google: GoogleOauth!
  plugins: PluginsModel!
}

input ConfirmEmailCodeInput {
  code: String!
}

input CreateBranchByRevisionIdInput {
  branchName: String!
  revisionId: String!
}

input CreateEndpointInput {
  revisionId: String!
  type: EndpointType!
}

input CreateProjectInput {
  branchName: String
  fromRevisionId: String
  organizationId: String!
  projectName: String!
}

input CreateRevisionInput {
  branchName: String!
  comment: String
  organizationId: String!
  projectName: String!
}

input CreateRowInput {
  data: JSON!
  revisionId: String!
  rowId: String!
  tableId: String!
}

type CreateRowResultModel {
  previousVersionTableId: String!
  row: RowModel!
  table: TableModel!
}

input CreateTableInput {
  revisionId: String!
  schema: JSON!
  tableId: String!
}

type CreateTableResultModel {
  branch: BranchModel!
  table: TableModel!
}

input CreateUserInput {
  email: String
  password: String!
  roleId: UserSystemRole!
  username: String!
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

input DateTimeFilter {
  equals: String
  gt: String
  gte: String
  in: [String!]
  lt: String
  lte: String
  notIn: [String!]
}

input DeleteEndpointInput {
  endpointId: String!
}

input DeleteProjectInput {
  organizationId: String!
  projectName: String!
}

type EndpointModel {
  createdAt: DateTime!
  id: String!
  revision: RevisionModel!
  revisionId: String!
  type: EndpointType!
}

type EndpointModelEdge {
  cursor: String!
  node: EndpointModel!
}

enum EndpointType {
  GRAPHQL
  REST_API
}

type EndpointsConnection {
  edges: [EndpointModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type FieldChangeModel {
  changeType: RowChangeDetailType!
  fieldPath: String!
  movedFrom: String
  newValue: JSON
  oldValue: JSON
}

input GetBranchInput {
  branchName: String!
  organizationId: String!
  projectName: String!
}

input GetBranchRevisionsInput {
  after: String
  before: String
  comment: String
  first: Int!
  inclusive: Boolean

  """Sort order: asc (default) or desc"""
  sort: SortOrder
}

input GetBranchesInput {
  after: String
  first: Int!
  organizationId: String!
  projectName: String!
}

input GetMeProjectsInput {
  after: String
  first: Int!
}

input GetProjectBranchesInput {
  after: String
  first: Int!
}

input GetProjectEndpointsInput {
  after: String
  branchId: String
  first: Int!
  organizationId: String!
  projectName: String!
  type: EndpointType
}

input GetProjectInput {
  organizationId: String!
  projectName: String!
}

input GetProjectsInput {
  after: String
  first: Int!
  organizationId: String!
}

input GetRevisionChangesInput {
  compareWithRevisionId: String
  includeSystem: Boolean = false
  revisionId: String!
}

input GetRevisionInput {
  revisionId: String!
}

input GetRevisionTablesInput {
  after: String
  first: Int!
}

input GetRowChangesInput {
  after: String
  compareWithRevisionId: String
  filters: RowChangesFiltersInput
  first: Int!
  revisionId: String!
}

input GetRowCountForeignKeysByInput {
  revisionId: String!
  rowId: String!
  tableId: String!
}

input GetRowForeignKeysInput {
  after: String
  first: Int!
  foreignKeyTableId: String!
}

input GetRowInput {
  revisionId: String!
  rowId: String!
  tableId: String!
}

input GetRowsInput {
  after: String
  first: Int!
  orderBy: [OrderBy!]
  revisionId: String!
  tableId: String!
  where: WhereInput
}

input GetTableChangesInput {
  after: String
  compareWithRevisionId: String
  filters: TableChangesFiltersInput
  first: Int!
  revisionId: String!
}

input GetTableForeignKeysInput {
  after: String
  first: Int!
}

input GetTableInput {
  revisionId: String!
  tableId: String!
}

input GetTableRowsInput {
  after: String
  first: Int!
}

input GetTableViewsInput {
  revisionId: String!
  tableId: String!
}

input GetTablesInput {
  after: String
  first: Int!
  revisionId: String!
}

input GetUsersOrganizationInput {
  after: String
  first: Int!
  organizationId: String!
}

input GetUsersProjectInput {
  after: String
  first: Int!
  organizationId: String!
  projectName: String!
}

type GithubOauth {
  available: Boolean!
  clientId: String
}

type GoogleOauth {
  available: Boolean!
  clientId: String
}

type HistoryPatchModel {
  hash: String!
  patches: [JsonPatchOperationModel!]!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

input JsonFilter {
  array_contains: [JSON!]
  array_ends_with: JSON
  array_starts_with: JSON
  equals: JSON
  gt: Float
  gte: Float
  lt: Float
  lte: Float
  mode: QueryMode
  path: [String!]
  search: String
  searchIn: SearchIn

  """Default: simple"""
  searchLanguage: SearchLanguage
  searchType: SearchType
  string_contains: String
  string_ends_with: String
  string_starts_with: String
}

enum JsonPatchOp {
  ADD
  COPY
  MOVE
  REMOVE
  REPLACE
}

type JsonPatchOperationModel {
  from: String
  op: JsonPatchOp!
  path: String!
  value: JSON
}

input LoginGithubInput {
  code: String!
}

input LoginGoogleInput {
  code: String!
  redirectUrl: String!
}

input LoginInput {
  emailOrUsername: String!
  password: String!
}

type LoginModel {
  accessToken: String!
}

enum MigrationType {
  INIT
  REMOVE
  RENAME
  UPDATE
}

type ModifiedRowChangeModel {
  changeType: ChangeType!
  fieldChanges: [FieldChangeModel!]!
  fromRow: RowChangeRowModel!
  fromTable: RowChangeTableModel!
  row: RowChangeRowModel!
  table: RowChangeTableModel!
}

type Mutation {
  addUserToOrganization(data: AddUserToOrganizationInput!): Boolean!
  addUserToProject(data: AddUserToProjectInput!): Boolean!
  confirmEmailCode(data: ConfirmEmailCodeInput!): LoginModel!
  createBranchByRevisionId(data: CreateBranchByRevisionIdInput!): BranchModel!
  createEndpoint(data: CreateEndpointInput!): EndpointModel!
  createProject(data: CreateProjectInput!): ProjectModel!
  createRevision(data: CreateRevisionInput!): RevisionModel!
  createRow(data: CreateRowInput!): CreateRowResultModel!
  createTable(data: CreateTableInput!): CreateTableResultModel!
  createUser(data: CreateUserInput!): Boolean!
  deleteEndpoint(data: DeleteEndpointInput!): Boolean!
  deleteProject(data: DeleteProjectInput!): Boolean!
  login(data: LoginInput!): LoginModel!
  loginGithub(data: LoginGithubInput!): LoginModel!
  loginGoogle(data: LoginGoogleInput!): LoginModel!
  patchRow(data: PatchRowInput!): PatchRowResultModel!
  removeRow(data: RemoveRowInput!): RemoveRowResultModel!
  removeRows(data: RemoveRowsInput!): RemoveRowsResultModel!
  removeTable(data: RemoveTableInput!): RemoveTableResultModel!
  removeUserFromOrganization(data: RemoveUserFromOrganizationInput!): Boolean!
  removeUserFromProject(data: RemoveUserFromProjectInput!): Boolean!
  renameRow(data: RenameRowInput!): RenameRowResultModel!
  renameTable(data: RenameTableInput!): RenameTableResultModel!
  revertChanges(data: RevertChangesInput!): BranchModel!
  setUsername(data: SetUsernameInput!): Boolean!
  signUp(data: SignUpInput!): Boolean!
  updatePassword(data: UpdatePasswordInput!): Boolean!
  updateProject(data: UpdateProjectInput!): Boolean!
  updateRow(data: UpdateRowInput!): UpdateRowResultModel!
  updateTable(data: UpdateTableInput!): UpdateTableResultModel!
  updateTableViews(data: UpdateTableViewsInput!): TableViewsDataModel!
  updateUserProjectRole(data: UpdateUserProjectRoleInput!): Boolean!
}

input OrderBy {
  aggregation: OrderDataAggregation
  direction: SortOrder!
  field: OrderByField!
  path: String
  type: OrderDataType
}

enum OrderByField {
  createdAt
  data
  id
  publishedAt
  updatedAt
}

enum OrderDataAggregation {
  avg
  first
  last
  max
  min
}

enum OrderDataType {
  boolean
  float
  int
  text
  timestamp
}

type OrganizationModel {
  createdId: String!
  id: String!
  userOrganization: UsersOrganizationModel
}

type PageInfo {
  endCursor: String
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
}

type ParentBranchModel {
  branch: BranchModel!
  revision: RevisionModel!
}

input PatchRow {
  op: PatchRowOp!
  path: String!
  value: JSON!
}

input PatchRowInput {
  patches: [PatchRow!]!
  revisionId: String!
  rowId: String!
  tableId: String!
}

enum PatchRowOp {
  replace
}

type PatchRowResultModel {
  previousVersionRowId: String!
  previousVersionTableId: String!
  row: RowModel!
  table: TableModel!
}

type PermissionModel {
  action: String!
  condition: JSON
  id: String!
  subject: String!
}

type PluginsModel {
  file: Boolean!
}

type ProjectModel {
  allBranches(data: GetProjectBranchesInput!): BranchesConnection!
  createdAt: DateTime!
  id: String!
  isPublic: Boolean!
  name: String!
  organization: OrganizationModel!
  organizationId: String!
  rootBranch: BranchModel!
  userProject: UsersProjectModel
}

type ProjectModelEdge {
  cursor: String!
  node: ProjectModel!
}

type ProjectsConnection {
  edges: [ProjectModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type Query {
  branch(data: GetBranchInput!): BranchModel!
  branches(data: GetBranchesInput!): BranchesConnection!
  configuration: ConfigurationModel!
  getRowCountForeignKeysTo(data: GetRowCountForeignKeysByInput!): Int! @deprecated(reason: "use RowModel.rowForeignKeysBy.totalCount")
  me: UserModel!
  meProjects(data: GetMeProjectsInput!): ProjectsConnection!
  project(data: GetProjectInput!): ProjectModel!
  projectEndpoints(data: GetProjectEndpointsInput!): EndpointsConnection!
  projects(data: GetProjectsInput!): ProjectsConnection!
  revision(data: GetRevisionInput!): RevisionModel!
  revisionChanges(data: GetRevisionChangesInput!): RevisionChangesModel!
  row(data: GetRowInput!): RowModel
  rowChanges(data: GetRowChangesInput!): RowChangesConnection!
  rows(data: GetRowsInput!): RowsConnection!
  searchRows(data: SearchRowsInput!): SearchResultsConnection!
  searchUsers(data: SearchUsersInput!): UsersConnection!
  table(data: GetTableInput!): TableModel
  tableChanges(data: GetTableChangesInput!): TableChangesConnection!
  tableViews(data: GetTableViewsInput!): TableViewsDataModel!
  tables(data: GetTablesInput!): TablesConnection!
  usersOrganization(data: GetUsersOrganizationInput!): UsersOrganizationConnection!
  usersProject(data: GetUsersProjectInput!): UsersProjectConnection!
}

enum QueryMode {
  default
  insensitive
}

input RemoveRowInput {
  revisionId: String!
  rowId: String!
  tableId: String!
}

type RemoveRowResultModel {
  branch: BranchModel!
  previousVersionTableId: String
  table: TableModel
}

input RemoveRowsInput {
  revisionId: String!
  rowIds: [String!]!
  tableId: String!
}

type RemoveRowsResultModel {
  branch: BranchModel!
  previousVersionTableId: String
  table: TableModel
}

input RemoveTableInput {
  revisionId: String!
  tableId: String!
}

type RemoveTableResultModel {
  branch: BranchModel!
}

input RemoveUserFromOrganizationInput {
  organizationId: String!
  userId: String!
}

input RemoveUserFromProjectInput {
  organizationId: String!
  projectName: String!
  userId: String!
}

type RemovedRowChangeModel {
  changeType: ChangeType!
  fieldChanges: [FieldChangeModel!]!
  fromRow: RowChangeRowModel!
  fromTable: RowChangeTableModel!
}

input RenameRowInput {
  nextRowId: String!
  revisionId: String!
  rowId: String!
  tableId: String!
}

type RenameRowResultModel {
  previousVersionRowId: String!
  previousVersionTableId: String!
  row: RowModel!
  table: TableModel!
}

input RenameTableInput {
  nextTableId: String!
  revisionId: String!
  tableId: String!
}

type RenameTableResultModel {
  previousVersionTableId: String!
  table: TableModel!
}

input RevertChangesInput {
  branchName: String!
  organizationId: String!
  projectName: String!
}

type RevisionChangeSummaryModel {
  added: Int!
  modified: Int!
  removed: Int!
  renamed: Int!
  total: Int!
}

type RevisionChangesModel {
  parentRevisionId: String
  revisionId: String!
  rowsSummary: RevisionChangeSummaryModel!
  tablesSummary: RevisionChangeSummaryModel!
  totalChanges: Int!
}

type RevisionConnection {
  edges: [RevisionModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type RevisionModel {
  branch: BranchModel!
  changes: RevisionChangesModel!
  child: RevisionModel
  childBranches: [ChildBranchModel!]!
  children: [RevisionModel!]!
  comment: String!
  createdAt: DateTime!
  endpoints: [EndpointModel!]!
  id: String!
  isDraft: Boolean!
  isHead: Boolean!
  isStart: Boolean!
  migrations: [JSON!]!
  parent: RevisionModel
  sequence: Int!
  tables(data: GetRevisionTablesInput!): TablesConnection!
}

type RevisionModelEdge {
  cursor: String!
  node: RevisionModel!
}

type RoleModel {
  id: String!
  name: String!
  permissions: [PermissionModel!]!
}

union RowChange = AddedRowChangeModel | ModifiedRowChangeModel | RemovedRowChangeModel

enum RowChangeDetailType {
  FIELD_ADDED
  FIELD_MODIFIED
  FIELD_MOVED
  FIELD_REMOVED
}

type RowChangeEdge {
  cursor: String!
  node: RowChange!
}

type RowChangeRowModel {
  createdAt: DateTime!
  createdId: String!
  data: JSON!
  hash: String!
  id: String!
  meta: JSON!
  publishedAt: DateTime!
  readonly: Boolean!
  schemaHash: String!
  updatedAt: DateTime!
  versionId: String!
}

type RowChangeTableModel {
  createdAt: DateTime!
  createdId: String!
  id: String!
  readonly: Boolean!
  system: Boolean!
  updatedAt: DateTime!
  versionId: String!
}

type RowChangesConnection {
  edges: [RowChangeEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input RowChangesFiltersInput {
  changeTypes: [ChangeType!]
  includeSystem: Boolean = false
  search: String
  tableId: String
}

type RowModel {
  countForeignKeysTo: Int!
  createdAt: DateTime!
  createdId: String!
  data: JSON!
  id: String!
  publishedAt: DateTime!
  readonly: Boolean!
  rowForeignKeysBy(data: GetRowForeignKeysInput!): RowsConnection!
  rowForeignKeysTo(data: GetRowForeignKeysInput!): RowsConnection!
  updatedAt: DateTime!
  versionId: String!
}

type RowModelEdge {
  cursor: String!
  node: RowModel!
}

type RowsConnection {
  edges: [RowModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type SchemaFieldChangeModel {
  changeType: String!
  fieldPath: String!
  movedFrom: String
  movedTo: String
  newSchema: JSON
  oldSchema: JSON
}

type SchemaMigrationDetailModel {
  historyPatches: [HistoryPatchModel!]
  initialSchema: JSON
  migrationId: String!
  migrationType: MigrationType!
  newTableId: String
  oldTableId: String
  patches: [JsonPatchOperationModel!]
}

enum SearchIn {
  all
  booleans
  keys
  numbers
  strings
  values
}

"""Language for full-text search. Default: simple"""
enum SearchLanguage {
  arabic
  armenian
  basque
  catalan
  danish
  dutch
  english
  finnish
  french
  german
  greek
  hindi
  hungarian
  indonesian
  irish
  italian
  lithuanian
  nepali
  norwegian
  portuguese
  romanian
  russian
  serbian
  simple
  spanish
  swedish
  tamil
  turkish
  yiddish
}

type SearchMatch {
  highlight: String
  path: String!
  value: JSON!
}

type SearchResult {
  matches: [SearchMatch!]!
  row: RowModel!
  table: TableModel!
}

type SearchResultEdge {
  cursor: String!
  node: SearchResult!
}

type SearchResultsConnection {
  edges: [SearchResultEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input SearchRowsInput {
  after: String
  first: Int = 20
  query: String!
  revisionId: String!
}

enum SearchType {
  phrase
  plain
}

input SearchUsersInput {
  after: String
  first: Int!
  search: String
}

input SetUsernameInput {
  username: String!
}

input SignUpInput {
  email: String!
  password: String!
  username: String!
}

enum SortOrder {
  asc
  desc
}

input StringFilter {
  contains: String
  endsWith: String
  gt: String
  gte: String
  lt: String
  lte: String
  mode: QueryMode
  not: String
  notIn: [String!]
  startsWith: String
}

type TableChangeModel {
  addedRowsCount: Int!
  changeType: ChangeType!
  fromVersionId: String
  modifiedRowsCount: Int!
  newTableId: String
  oldTableId: String
  removedRowsCount: Int!
  renamedRowsCount: Int!
  rowChangesCount: Int!
  schemaMigrations: [SchemaMigrationDetailModel!]!
  tableCreatedId: String!
  tableId: String!
  toVersionId: String
  viewsChanges: ViewsChangeDetailModel!
}

type TableChangeModelEdge {
  cursor: String!
  node: TableChangeModel!
}

type TableChangesConnection {
  edges: [TableChangeModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input TableChangesFiltersInput {
  changeTypes: [ChangeType!]
  includeSystem: Boolean = false
  search: String
  withSchemaMigrations: Boolean
}

type TableModel {
  count: Int!
  countForeignKeysBy: Int!
  countForeignKeysTo: Int!
  createdAt: DateTime!
  createdId: String!
  foreignKeysBy(data: GetTableForeignKeysInput!): TablesConnection!
  foreignKeysTo(data: GetTableForeignKeysInput!): TablesConnection!
  id: String!
  readonly: Boolean!
  rows(data: GetTableRowsInput!): RowsConnection!
  schema: JSON!
  updatedAt: DateTime!
  versionId: String!
  views: TableViewsDataModel!
}

type TableModelEdge {
  cursor: String!
  node: TableModel!
}

input TableViewsDataInput {
  defaultViewId: String!
  version: Int!
  views: [ViewInput!]!
}

type TableViewsDataModel {
  defaultViewId: String!
  version: Int!
  views: [ViewModel!]!
}

type TablesConnection {
  edges: [TableModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input UpdatePasswordInput {
  newPassword: String!
  oldPassword: String!
}

input UpdateProjectInput {
  isPublic: Boolean!
  organizationId: String!
  projectName: String!
}

input UpdateRowInput {
  data: JSON!
  revisionId: String!
  rowId: String!
  tableId: String!
}

type UpdateRowResultModel {
  previousVersionRowId: String!
  previousVersionTableId: String!
  row: RowModel!
  table: TableModel!
}

input UpdateTableInput {
  patches: JSON!
  revisionId: String!
  tableId: String!
}

type UpdateTableResultModel {
  previousVersionTableId: String!
  table: TableModel!
}

input UpdateTableViewsInput {
  revisionId: String!
  tableId: String!
  viewsData: TableViewsDataInput!
}

input UpdateUserProjectRoleInput {
  organizationId: String!
  projectName: String!
  roleId: UserProjectRoles!
  userId: String!
}

type UserModel {
  email: String
  id: String!
  organizationId: String
  role: RoleModel
  username: String
}

type UserModelEdge {
  cursor: String!
  node: UserModel!
}

enum UserOrganizationRoles {
  developer
  editor
  organizationAdmin
  organizationOwner
  reader
}

enum UserProjectRoles {
  developer
  editor
  reader
}

enum UserSystemRole {
  systemAdmin
  systemFullApiRead
  systemUser
}

type UsersConnection {
  edges: [UserModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type UsersOrganizationConnection {
  edges: [UsersOrganizationModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type UsersOrganizationModel {
  id: String!
  role: RoleModel!
  user: UserModel!
}

type UsersOrganizationModelEdge {
  cursor: String!
  node: UsersOrganizationModel!
}

type UsersProjectConnection {
  edges: [UsersProjectModelEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type UsersProjectModel {
  id: String!
  role: RoleModel!
  user: UserModel!
}

type UsersProjectModelEdge {
  cursor: String!
  node: UsersProjectModel!
}

type ViewChangeModel {
  changeType: ChangeType!
  oldViewName: String
  viewId: String!
  viewName: String!
}

input ViewColumnInput {
  field: String!
  width: Float
}

type ViewColumnModel {
  field: String!
  width: Float
}

input ViewInput {
  columns: [ViewColumnInput!]
  description: String
  filters: JSON
  id: String!
  name: String!
  search: String
  sorts: [ViewSortInput!]
}

type ViewModel {
  columns: [ViewColumnModel!]
  description: String
  filters: JSON
  id: String!
  name: String!
  search: String
  sorts: [ViewSortModel!]
}

input ViewSortInput {
  direction: SortOrder!
  field: String!
}

type ViewSortModel {
  direction: String!
  field: String!
}

type ViewsChangeDetailModel {
  addedCount: Int!
  changes: [ViewChangeModel!]!
  hasChanges: Boolean!
  modifiedCount: Int!
  removedCount: Int!
  renamedCount: Int!
}

input WhereInput {
  AND: [WhereInput!]
  NOT: [WhereInput!]
  OR: [WhereInput!]
  createdAt: DateTimeFilter
  createdId: StringFilter
  data: JsonFilter
  id: StringFilter
  publishedAt: DateTimeFilter
  readonly: BooleanFilter
  updatedAt: DateTimeFilter
  versionId: StringFilter
}